!function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t){kiwi.plugin("conferencePlugin",function(e,t){let i=e.state.setting("conference.server")||"meet.jit.si",n=mediaViewerOpen=jitsiLoaded=api=buttonAdded=!1,o=resizejitsiDiv=network=buffer=options=domain=!1;if(!buttonAdded){buttonAdded=!0;const t=document.createElement("i");t.className="fa fa-video-camera",e.addUi("input",t),t.onclick=function(t){t.preventDefault(),n?a():n||(n=!0,e.emit("mediaviewer.show",{iframe:!1,url:"about:blank"}),setTimeout(()=>{(document.getElementsByClassName("embedly-card")[0],o=document.getElementsByClassName("kiwi-mediaviewer")[0].childNodes[2]).style.width="100%",o.style.height="100%",network=window.kiwi.state.getActiveNetwork(),buffer=window.kiwi.state.getActiveBuffer();let e,t=Date.now();for(;void 0===buffer.name&&Date.now()-t<5e3;)buffer=window.kiwi.state.getActiveBuffer();if(network.isChannelName(buffer.name))e=buffer.name.replace(/#/g,"");else{let t=[];t.push(network.nick),t.push(buffer.name),t.sort();let i=t.join("").replace(/-/g,"");e=encodeURIComponent(i.substring(0,-1==i.indexOf("#")?100:i.indexOf("#")-1))}let n=network.name+e;domain=i,options={height:"100%",roomName:n,parentNode:o,interfaceConfigOverwrite:{TOOLBAR_BUTTONS:["microphone","camera","fullscreen","fodeviceselection","hangup","profile","contacts","info","recording","etherpad","settings","videoquality","filmstrip","invite","feedback","stats","shortcuts"]}};let a=document.createElement("script");a.setAttribute("type","text/javascript"),a.setAttribute("src","https://meet.jit.si/external_api.js"),a.addEventListener("load",function(e){"SCRIPT"===e.target.nodeName&&(jitsiLoaded=!0,o.innerHTML="",api=new JitsiMeetExternalAPI(domain,options),api.executeCommand("displayName",network.nick),api.executeCommand("toggleAudio"),api.executeCommand("toggleVideo"))}),jitsiLoaded||(jitsiLoaded=!0,document.head.appendChild(a))},100))}}function a(){jitsiLoaded&&(o.style.display="none",jitsiLoaded=!1,api.dispose()),e.emit("mediaviewer.hide")}window.addEventListener("click",function(e){-1!==e.srcElement.className.indexOf("u-button-secondary")&&a()}),e.on("mediaviewer.opened",function(){mediaViewerOpen=!0}),e.on("mediaviewer.hide",function(){mediaViewerOpen=!1,n=!1,jitsiLoaded=!1})})}]);
//# sourceMappingURL=main.js.map