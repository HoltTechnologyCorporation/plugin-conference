!function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t){kiwi.plugin("conferencePlugin",function(e,t){let i=e.state.setting("conference.server"),n=camClick=mediaViewerOpen=jitsiLoaded=api=buttonAdded=!1,o=resizejitsiDiv=network=buffer=options=domain=!1;function a(){if(mediaViewerOpen=!0,camClick){if(!n)if(jitsiLoaded)o.style.display="block",resizeJitsiDiv();else{o=document.createElement("div"),resizeJitsiDiv=function(){let e=document.getElementsByClassName("kiwi-mediaviewer")[0];o.style.height=e.clientHeight+"px",o.style.width=e.clientWidth+"px",o.style.position="absolute";let t=e.getBoundingClientRect();o.style.top=t.top+"px",o.style.left=t.left+"px"},resizeJitsiDiv(),window.addEventListener("resize",function(){n&&resizeJitsiDiv()}),o.style.background="#000",o.innerHTML="Loading Camera...",document.body.appendChild(o),network=window.kiwi.state.getActiveNetwork(),buffer=window.kiwi.state.getActiveBuffer();let e,t=Date.now();for(;void 0===buffer.name&&Date.now()-t<5e3;)buffer=window.kiwi.state.getActiveBuffer();if(network.isChannelName(buffer.name))e=buffer.name.replace(/#/g,"");else{let t=[];t.push(network.nick),t.push(buffer.name),t.sort();let i=t.join("").replace(/-/g,"");e=encodeURIComponent(i.substring(0,-1==i.indexOf("#")?100:i.indexOf("#")-1))}let a=network.name+e;domain=i,options={height:"100%",roomName:a,parentNode:o,interfaceConfigOverwrite:{TOOLBAR_BUTTONS:["microphone","camera","fullscreen","fodeviceselection","hangup","profile","contacts","info","recording","etherpad","settings","videoquality","filmstrip","invite","feedback","stats","shortcuts"]}};let r=document.createElement("script");r.setAttribute("type","text/javascript"),r.setAttribute("src","https://meet.jit.si/external_api.js"),r.addEventListener("load",function(e){"SCRIPT"===e.target.nodeName&&(jitsiLoaded=!0,o.innerHTML="",api=new JitsiMeetExternalAPI(domain,options),api.executeCommand("displayName",network.nick),api.executeCommand("toggleAudio"),api.executeCommand("toggleVideo"))}),document.head.appendChild(r)}n=!0}}function r(){jitsiLoaded&&(o.style.display="none",jitsiLoaded=!1,api.dispose()),n=!1,camClick=!1}e.on("irc.raw",function(t,i){if("JOIN"===t&&!buttonAdded){buttonAdded=!0;const t=document.createElement("i");t.className="fa fa-video-camera",e.addUi("input",t),t.onclick=function(t){t.preventDefault(),camClick=!0,n?e.emit("mediaviewer.hide"):mediaViewerOpen?a():e.emit("mediaviewer.show","")}}}),window.addEventListener("click",function(e){-1===e.srcElement.className.indexOf("kiwi-messagelist-message-linkhandle")&&-1===e.srcElement.className.indexOf("u-button-secondary")||r()}),e.on("mediaviewer.opened",function(){a()}),e.on("mediaviewer.hide",function(){r(),mediaViewerOpen=!1})})}]);
//# sourceMappingURL=main.js.map